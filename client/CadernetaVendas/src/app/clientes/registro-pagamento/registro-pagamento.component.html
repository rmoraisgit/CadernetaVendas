<ng-template #modalConfirmaPagamento>
  <cv-modal tituloModal="Confirmar pagamento">
    <cv-confirma-pagamento [dadosPagamento]="pagamento"></cv-confirma-pagamento>
  </cv-modal>
</ng-template>

<div class="row">
  <div class="col-12">
    <h3>Registro de Pagamento</h3>
    <form [formGroup]="pagamentoForm">
      <div class="form-row">
        <div class="form-group col-6">
          <label for="dataPagamento">Data do pagamento</label>
          <div class="input-group">
            <input formControlName="dataPagamento" class="form-control" placeholder="dd-mm-yyyy" name="dp" ngbDatepicker
              #d="ngbDatepicker" id="dataPagamento">
            <div class="input-group-append">
              <button class="btn btn-outline-secondary calendar" (click)="d.toggle()" type="button">
                <i class="fa fa-calendar" aria-hidden="true"></i>
              </button>
            </div>
          </div>

          <ap-vmessage *ngIf="displayMessage.dataPagamento" text="{{displayMessage.dataPagamento}}">
          </ap-vmessage>
        </div>
        <div class="form-group col-6">
          <label for="dataPagamento">Método do pagamento</label>
          <select formControlName="metodosPagamento" class="form-control" id="metodoPagamento">
            <option selected value="Selecione...">Selecione...</option>
            <option *ngFor="let metodoPagamento of metodosPagamento" [value]="metodoPagamento.id">
              {{metodoPagamento.nome}}
            </option>
          </select>
        </div>
        <div class="form-group col-6">
          <label for="totalPago">Total pago</label>
          <input formControlName="totalPago" currencyMask type="text" class="form-control" id="totalPago"
            placeholder="R$ 0,00" [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }">

          <ap-vmessage *ngIf="displayMessage.totalPago" text="{{displayMessage.totalPago}}">
          </ap-vmessage>
        </div>
      </div>
      <div class="button-group row">
        <div class="col-6">
          <button class="btn btn-primary" [routerLink]="['/clientes']" type="button">Cancelar</button>
        </div>
        <div class="col-6">
          <button class="btn btn-success" type="button" (click)="gerarDadosPagamento(modalConfirmaPagamento)"
            [disabled]="pagamentoForm.invalid">Avançar</button>
        </div>
      </div>
    </form>
  </div>
</div>